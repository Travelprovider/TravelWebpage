<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guia TravelProvider.pt</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body {
      padding-top: 80px;
    }
    .hero {
      background: #ffffff;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .hero h1, .hero p {
      color: #000000;
    }
  </style>
</head>
<body>
  <!-- Navbar simplificada -->
  <nav class="navbar navbar-light bg-light fixed-top shadow">
    <div class="container d-flex align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img src="logo-travelprovider-mini.png" alt="Logo" height="40" class="me-2">
        <span>TravelProvider.pt</span>
      </a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div>
      <h1>Encontre Infraestruturas de Saúde e Bem-Estar</h1>
      <p class="lead">Filtros por tipo, distrito e acesso rápido ao Google Maps</p>
    </div>
  </section>

  <!-- Conteúdo Principal -->
  <main class="container my-5">
    <div class="row mb-4">
      <div class="col-md-6">
        <label for="tipo" class="form-label">Tipo de infraestrutura:</label>
        <select id="tipo" class="form-select">
          <option value="">Todos</option>
        </select>
      </div>
      <div class="col-md-6">
        <label for="distrito" class="form-label">Distrito:</label>
        <select id="distrito" class="form-select">
          <option value="">Todos</option>
        </select>
      </div>
    </div>

    <ul id="resultados" class="list-group"></ul>
  </main>

  <script>
    let dados = [];

    fetch('infraestruturas-travel.json')
      .then(res => res.json())
      .then(json => {
        dados = json;
        popularTipos();
        popularDistritos();
        atualizarResultados();
      });

    const tipoSelect = document.getElementById('tipo');
    const distritoSelect = document.getElementById('distrito');
    const resultados = document.getElementById('resultados');

    tipoSelect.addEventListener('change', () => {
      popularDistritos();
      atualizarResultados();
    });

    distritoSelect.addEventListener('change', atualizarResultados);

    function popularTipos() {
      tipoSelect.innerHTML = '<option value="">Todos</option>';
      const tipos = [...new Set(dados.map(item => item.tipo))].sort();
      tipos.forEach(tipo => {
        const opt = document.createElement('option');
        opt.value = opt.textContent = tipo;
        tipoSelect.appendChild(opt);
      });
    }

    function popularDistritos() {
      const tipoSelecionado = tipoSelect.value;
      const distritosFiltrados = dados
        .filter(item => !tipoSelecionado || item.tipo === tipoSelecionado)
        .map(item => item.distrito);

      const distritosUnicos = [...new Set(distritosFiltrados)].sort();

      distritoSelect.innerHTML = '<option value="">Todos</option>';
      distritosUnicos.forEach(distrito => {
        const opt = document.createElement('option');
        opt.value = opt.textContent = distrito;
        distritoSelect.appendChild(opt);
      });
    }

    function atualizarResultados() {
      const tipo = tipoSelect.value;
      const distrito = distritoSelect.value;

      const filtrados = dados.filter(item =>
        (!tipo || item.tipo === tipo) &&
        (!distrito || item.distrito === distrito)
      );

      resultados.innerHTML = "";
      filtrados.forEach(item => {
        const li = document.createElement('li');
        li.className = 'list-group-item';
        li.innerHTML = `<h5>${item.nome}</h5><p>${item.tipo}, ${item.distrito}</p>
          <a href="${item.googleMapsLink}" target="_blank" class="btn btn-outline-primary btn-sm">Ver no Google Maps</a>`;
        resultados.appendChild(li);
      });
    }
  </script>
</body>
</html>
